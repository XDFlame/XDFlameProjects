<!DOCTYPE html>

<html>

	<head>

		<meta charset="UTF-8">

		<title>Pity Calculator</title>

		<link rel="icon" href="../Style/ar.webp">

		<link rel="stylesheet" href="../Style/style.css">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<style>

			div.container {
				grid-template-columns: repeat(2, 1fr);
			}

			p#output {
				grid-column: span 2;
			}

			@media(max-width: 1000px) {
				div.container {
					grid-template-columns: 1fr;
				}

				p#output {
					grid-column: 1;
				}
			}

		</style>

	</head>

	<body>

		<main>

			<header>Instructions</header>

			<article>
				To use the pity calculator, just enter the number of runs you've done and the boss. It will calculate the current drop rate based off that information.
			</article>

			<div class="container">

				<input type="number" id="kills_input" placeholder="Number of Kills" onchange="calculate()">

				<select id="boss_selector" onchange="calculate()">

					<option hidden selected>None</option>
					<option value="khnum">Khnum</option>
					<option value="kraken">Kraken</option>
					<option value="marua">Marua</option>
					<option value="nestor">Nestor</option>
					<option value="prometheus">Prometheus</option>
					<option value="ramses">Ramses</option>
					<option value="rupin">Rupin</option>
					<option value="sage">Sage</option>
					<option value="verdies">Verdies</option>

				</select>

				<p id="output"></p>

			</div>

		</main>

		<script src="../toggle.js"></script>

		<script>

			// Variables

				const bosses = {
					khnum: {
						base: 150,
						max: 100,
						scaling: 3
					},
					kraken: {
						base: 150,
						max: 20,
						scaling: 1,
					},
					marua: {
						base: 30,
						max: 3,
						scaling: 1,
					},
					nestor: {
						base: 300,
						max: 250,
						scaling: 3
					},
					prometheus: {
						base: 250,
						max: 125,
						scaling: 3
					},
					ramses: {
						base: 50,
						max: 15,
						scaling: 1
					},
					rupin: {
						base: 125,
						max: 25,
						scaling: 1
					},
					sage: {
						base: 85,
						max: 15,
						scaling: 1
					},
					verdies: {
						base: 50,
						max: 15,
						scaling: 1
					}
				}


			// Function

				function calculate() {

					let selected_boss = boss_selector.value;
					let kills = Number(kills_input.value);
					let chance = Math.max(bosses[selected_boss].base - Math.floor(kills / bosses[selected_boss].scaling), bosses[selected_boss].max);
					output.style.opacity = 1;
					output.textContent = `The drop rate is 1/${chance}`;
				}

		</script>

	</body>

</html>